(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{70:function(e,t,a){"use strict";a.r(t);var r,c,s,n=a(1),i=a.n(n),o=a(19),l=a.n(o),d=a(7),u=a(2),j=a(13);a(46);!function(e){e.Main="/",e.Login="/login",e.Favorites="/favorites",e.Offer="/offer/:id",e.Error404="/error404"}(r||(r={})),function(e){e.Main="main",e.Favorites="favorites",e.Offer="offer",e.Near="near"}(c||(c={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(s||(s={}));var p,m=["Popular","Price: low to high","Price: high to low","Top rated first"],b=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];!function(e){e.SortOffers="main/sortOffers",e.FilterOffers="main/filterOffers",e.LoadOfferList="main/loadOfferList",e.LoadOfferItem="detail/loadOfferItem",e.LoadNearList="detail/loadNearList",e.LoadReviewList="detail/loadReviewList",e.ReviewMessageAction="reviewMessageAction",e.ReviewRatingAction="reviewRatingAction",e.ReviewFormBlockingAction="reviewFormBlockingAction",e.LoadFavoriteList="favorite/loadFavoriteList",e.RequireAuth="user/requireAuth",e.RequireLogin="user/RequireLogout",e.RequireLogout="user/RequireLogout",e.RedirectToRoute="redirectToRoute"}(p||(p={}));var f,_=Object(d.b)(p.FilterOffers,(function(e){return{payload:{filterOffersType:e}}})),v=Object(d.b)(p.SortOffers,(function(e){return{payload:{sortOffersType:e}}})),O=Object(d.b)(p.LoadOfferList,(function(e){return{payload:{offerList:e}}})),x=Object(d.b)(p.LoadOfferItem,(function(e){return{payload:{offerItem:e}}})),g=Object(d.b)(p.LoadNearList,(function(e){return{payload:{nearList:e}}})),N=Object(d.b)(p.LoadReviewList,(function(e){return{payload:{reviewList:e}}})),y=Object(d.b)(p.LoadFavoriteList,(function(e){return{payload:{favoriteList:e}}})),w=Object(d.b)(p.RequireAuth,(function(e){return{payload:e}})),k=Object(d.b)(p.RequireLogout),L=Object(d.b)(p.RequireLogin,(function(e){return{payload:e}})),R=Object(d.b)(p.RedirectToRoute,(function(e){return{payload:e}})),S=Object(d.b)(p.ReviewMessageAction,(function(e){return{payload:e}})),F=Object(d.b)(p.ReviewRatingAction,(function(e){return{payload:e}})),M=Object(d.b)(p.ReviewFormBlockingAction,(function(e){return{payload:e}})),A={authStatus:s.Unknown,isDataLoaded:!1,reviewMessage:"",reviewRating:0,reviewFormIsBlocked:!1,filterOffersType:b[0],sortOffersType:m[0],offerList:[],offerItem:null,nearList:[],reviewList:[],favoriteList:[],user:{img:"",name:"",isPro:!1}},I=Object(d.c)(A,(function(e){e.addCase(_,(function(e,t){var a=t.payload.filterOffersType;e.filterOffersType=a})).addCase(v,(function(e,t){var a=t.payload.sortOffersType;e.sortOffersType=a})).addCase(O,(function(e,t){var a=t.payload.offerList;e.offerList=a,e.isDataLoaded=!0})).addCase(x,(function(e,t){var a=t.payload.offerItem;e.offerItem=a})).addCase(g,(function(e,t){var a=t.payload.nearList;e.nearList=a})).addCase(N,(function(e,t){var a=t.payload.reviewList;e.reviewList=a})).addCase(y,(function(e,t){var a=t.payload.favoriteList;e.favoriteList=a})).addCase(w,(function(e,t){e.authStatus=t.payload})).addCase(L,(function(e,t){e.user=t.payload})).addCase(S,(function(e,t){e.reviewMessage=t.payload})).addCase(F,(function(e,t){e.reviewRating=t.payload})).addCase(M,(function(e,t){e.reviewFormIsBlocked=t.payload}))})),C=a(23),T=a(9),P=a(6),E=a.n(P),z=a(16),q="token",U=function(e){localStorage.setItem(q,e)},H=function(e,t,a){var r=a.findIndex((function(t){return t.id===e})),c=Object(T.a)(a)[r],s=Object(C.a)(Object(C.a)({},c),{},{isFeature:t});return[].concat(Object(T.a)(a.slice(0,r)),[s],Object(T.a)(a.slice(r+1)))},D="user-data",B=function(){var e=localStorage.getItem(D);return null!==e&&void 0!==e?e:""},J=function(e){var t;return{id:e.id.toString()||"",city:{name:e.city.name||"",lat:e.city.location.latitude,lng:e.city.location.longitude,zoom:e.city.location.zoom},location:{lat:e.location.latitude,lng:e.location.longitude,zoom:e.location.zoom},img:e.preview_image||"",gallery:e.images||[],price:e.price,stars:e.rating,name:e.title||"",type:(t=e.type,t.charAt(0).toUpperCase()+t.slice(1)||""),isFeature:e.is_favorite||!1,isPremium:e.is_premium||!1,detail:{bedrooms:e.bedrooms,maxAdults:e.max_adults,includes:e.goods,user:{img:e.host.avatar_url||"",name:e.host.name||"",isPro:e.host.is_pro||!1},description:e.description||""}}},W=function(e){return e.map((function(e){return J(e)}))};!function(e){e.OfferList="/hotels",e.ReviewList="/comments",e.FavoriteList="/favorite",e.Login="/login",e.Logout="/logout"}(f||(f={}));var Z,Y="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",K=function(){return function(){var e=Object(z.a)(E.a.mark((function e(t,a,r){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(f.Login);case 2:c=e.sent,t(L({img:(a=c.data).avatar_url,name:a.name,isPro:a.is_pro})),t(w(s.Auth));case 5:case"end":return e.stop()}var a}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},$=function(e){return function(){var t=Object(z.a)(E.a.mark((function t(a,r,c){var s,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.get("".concat(f.ReviewList,"/").concat(e));case 3:s=t.sent,n=s.data,a(N(n.map((function(e){return{id:e.id,stars:e.rating,text:e.comment,date:e.date,user:{img:e.user.avatar_url,name:e.user.name,isPro:e.user.is_pro}}})))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),j.b.info(Y);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a,r){return t.apply(this,arguments)}}()},G=function(e,t,a){return function(){var s=Object(z.a)(E.a.mark((function s(n,i,o){var l,d,u,j,p,m,b;return E.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,l=Number(!t),s.next=4,o.post("".concat(f.FavoriteList,"/").concat(e,"/").concat(l));case 4:d=i(),a===c.Favorites&&(u=d.favoriteList.findIndex((function(t){return t.id===e})),j=Object(T.a)(d.favoriteList),n(y([].concat(Object(T.a)(j.slice(0,u)),Object(T.a)(j.slice(u+1)))))),a===c.Main&&(p=H(e,!t,d.offerList),n(O(p))),a===c.Near&&(m=H(e,!t,d.nearList),n(g(m))),a===c.Offer&&null!==d.offerItem&&((b=Object(C.a)({},d.offerItem)).isFeature=!t,n(x(b))),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),n(R(r.Login));case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(e,t,a){return s.apply(this,arguments)}}()},Q=a(10),V=Object(Q.a)(),X=function(e){return function(e){return function(t){return t.type===p.RedirectToRoute&&V.push(t.payload),e(t)}}},ee=a(38),te=a.n(ee);!function(e){e[e.Unauthorized=401]="Unauthorized"}(Z||(Z={}));var ae=a(5),re=a(4),ce=a(0);var se=function(e){var t=e.authStatus,a=e.user,c=t===s.Auth,n=t===s.NoAuth,i="";B()&&(i=JSON.parse(B()).login);var o=""!==(null===a||void 0===a?void 0:a.img),l=Object(u.b)();return Object(ce.jsxs)("nav",{className:"header__nav",children:[c&&Object(ce.jsxs)("ul",{className:"header__nav-list",children:[Object(ce.jsx)("li",{className:"header__nav-item user",children:Object(ce.jsxs)(re.a,{className:"header__nav-link header__nav-link--profile",to:r.Favorites,children:[Object(ce.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper",children:o&&Object(ce.jsx)("img",{className:"user__avatar",src:null===a||void 0===a?void 0:a.img,alt:"\u042e\u0437\u0435\u0440\u043f\u0438\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(ce.jsx)("span",{className:"header__user-name user__name",children:i})]})}),Object(ce.jsx)("li",{className:"header__nav-item",children:Object(ce.jsx)(re.a,{className:"header__nav-link",onClick:function(){l(function(){var e=Object(z.a)(E.a.mark((function e(t,a,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.delete(f.Logout),localStorage.removeItem(q),t(L({img:"",name:"",isPro:!1})),t(k()),t(w(s.NoAuth))}catch(a){j.b.info(Y)}case 1:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()),localStorage.removeItem(D)},to:r.Login,children:Object(ce.jsx)("span",{className:"header__signout",children:"Sign out"})})})]}),n&&Object(ce.jsx)("ul",{className:"header__nav-list",children:Object(ce.jsx)("li",{className:"header__nav-item user",children:Object(ce.jsxs)(re.a,{className:"header__nav-link header__nav-link--profile",to:r.Login,children:[Object(ce.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(ce.jsx)("span",{className:"header__login",children:"Sign in"})]})})})]})};var ne=function(){var e=Object(u.c)((function(e){return e})),t=e.authStatus,a=e.user;return Object(ce.jsx)("header",{className:"header",children:Object(ce.jsx)("div",{className:"container",children:Object(ce.jsxs)("div",{className:"header__wrapper",children:[Object(ce.jsx)("div",{className:"header__left",children:Object(ce.jsx)(re.a,{className:"header__logo-link",to:r.Main,children:Object(ce.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})}),t!==s.Unknown&&Object(ce.jsx)(se,{authStatus:t,user:a})]})})})};var ie=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).filterOffersType;return Object(ce.jsx)("div",{className:"tabs",children:Object(ce.jsx)("section",{className:"locations container",children:Object(ce.jsx)("ul",{className:"locations__list tabs__list",children:b.map((function(a){var r=a===t?" tabs__item--active":"";return Object(ce.jsx)("li",{className:"locations__item",children:Object(ce.jsx)("a",{onClick:function(t){t.preventDefault(),e(_(a)),e(v(m[0]))},className:"locations__item-link tabs__item".concat(r),href:"#",children:Object(ce.jsx)("span",{children:a})})},a)}))})})})};var oe=function(){return Object(ce.jsx)("div",{className:"cities",children:Object(ce.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(ce.jsx)("section",{className:"cities__no-places",children:Object(ce.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(ce.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(ce.jsx)("p",{className:"cities__status-description",children:"We could not find any property available at the moment in Dusseldorf"})]})}),Object(ce.jsx)("div",{className:"cities__right-section"})]})})},le=a(17),de=a(18);a(69);var ue=function(e,t){var a=Object(n.useState)(null),r=Object(le.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){if(null!==e.current&&null===c){var a=new de.Map(e.current,{center:{lat:t.lat,lng:t.lng},zoom:10}),r=new de.TileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'});a.addLayer(r),s(a)}}),[e,c,t]),c},je=new de.Icon({iconUrl:"img/pin.svg",iconSize:[27,39],iconAnchor:[20,40]}),pe=new de.Icon({iconUrl:"img/pin-active.svg",iconSize:[27,39],iconAnchor:[20,40]});var me=function(e){var t=e.city,a=e.activeId,r=e.data,c=Object(n.useRef)(null),s=ue(c,t);return Object(n.useEffect)((function(){if(s){var e=[];return r.forEach((function(t){var r=new de.Marker({lat:t.location.lat,lng:t.location.lng});r.setIcon(null!==a&&t.id===a?pe:je).addTo(s),e.push(r)})),s.flyTo([t.lat,t.lng],12),s.scrollWheelZoom.disable(),function(){e.forEach((function(e){e.remove()}))}}}),[s,r,a]),Object(ce.jsx)("div",{className:"map",style:{height:"100%"},ref:c})};var be=function(e){var t=e.data,a=Object(ae.h)(),s=t.id,n=Object(u.b)(),i=t.isFeature?" place-card__bookmark-button--active":"",o="".concat(20*Math.floor(t.stars),"%");return Object(ce.jsxs)("article",{className:"place-card",children:[t.isPremium&&Object(ce.jsx)("div",{className:"place-card__mark",children:Object(ce.jsx)("span",{children:"Premium"})}),Object(ce.jsx)("div",{className:"cities__image-wrapper place-card__image-wrapper",children:Object(ce.jsx)(re.a,{to:Object(ae.f)(r.Offer,{id:s}),children:Object(ce.jsx)("img",{className:"place-card__image",src:t.img,width:"260",height:"200",alt:"Offer image"})})}),Object(ce.jsxs)("div",{className:"place-card__info",children:[Object(ce.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(ce.jsxs)("div",{className:"place-card__price",children:[Object(ce.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",t.price]}),Object(ce.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(ce.jsxs)("button",{className:"place-card__bookmark-button button".concat(i),type:"button",onClick:function(){a.pathname===r.Main?n(G(s,t.isFeature,c.Main)):n(G(s,t.isFeature,c.Near))},children:[Object(ce.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",children:Object(ce.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(ce.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(ce.jsx)("div",{className:"place-card__rating rating",children:Object(ce.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(ce.jsx)("span",{style:{width:o}}),Object(ce.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(ce.jsx)("h2",{className:"place-card__name",children:Object(ce.jsx)(re.a,{to:Object(ae.f)(r.Offer,{id:s}),children:t.name})}),Object(ce.jsx)("p",{className:"place-card__type",children:t.type})]})]})};var he=function(){var e=Object(u.c)((function(e){return e})).sortOffersType,t=Object(u.b)(),a=Object(n.useState)(null),r=Object(le.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(!1),o=Object(le.a)(i,2),l=o[0],d=o[1],j="places__options places__options--custom".concat(l?" places__options--opened":"");return Object(ce.jsxs)("form",{className:"places__sorting",action:"#",method:"get",children:[Object(ce.jsx)("span",{className:"places__sorting-caption",children:"Sort by "}),Object(ce.jsxs)("span",{className:"places__sorting-type",tabIndex:0,onClick:function(){d(!l)},children:[e,Object(ce.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(ce.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(ce.jsx)("ul",{className:j,children:m.map((function(e,a){return Object(ce.jsx)("li",{className:(r=a,"places__option".concat(c===r?" places__option--active":"")),tabIndex:0,onClick:function(){t(v(e)),d(!1)},onMouseEnter:function(){s(a)},onMouseLeave:function(){s(null)},children:e},e);var r}))})]})};var fe=function(e){var t=e.data,a=e.onItemHover;return Object(ce.jsxs)("section",{className:"cities__places places",children:[Object(ce.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(ce.jsxs)("b",{className:"places__found",children:[t.length," places to stay in ",t[0].city.name]}),Object(ce.jsx)(he,{}),Object(ce.jsx)("div",{className:"cities__places-list places__list tabs__content",children:t.map((function(e){return Object(ce.jsx)("div",{className:"cities__place-card",onMouseEnter:function(){a(e.id)},onMouseLeave:function(){a(null)},children:Object(ce.jsx)(be,{data:e})},e.id)}))})]})};var _e=function(e){var t=e.data,a=Object(n.useState)(null),r=Object(le.a)(a,2),c=r[0],s=r[1];return Object(ce.jsx)("div",{className:"cities",children:Object(ce.jsxs)("div",{className:"cities__places-container container",children:[Object(ce.jsx)(fe,{data:t,onItemHover:function(e){s(e)}}),Object(ce.jsx)("div",{className:"cities__right-section",children:Object(ce.jsx)("section",{className:"cities__map",children:Object(ce.jsx)(me,{city:t[0].city,data:t,activeId:c})})})]})})};var ve=function(){return Object(ce.jsx)("main",{className:"page__main",children:Object(ce.jsx)("p",{className:"container",children:"Loading ..."})})};var Oe=function(){var e=Object(u.c)((function(e){return e})),t=e.isDataLoaded,a=e.offerList,r=e.filterOffersType,c=e.sortOffersType,s=Object(u.b)();Object(n.useEffect)((function(){s(function(){var e=Object(z.a)(E.a.mark((function e(t,a,r){var c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get(f.OfferList);case 3:c=e.sent,s=c.data,t(O(W(s))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.info(Y);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,r){return e.apply(this,arguments)}}())}),[s]);var i=a.filter((function(e){return e.city.name===r})),o=function(e,t){switch(t){case"Price: low to high":return e.slice().sort((function(e,t){return e.price-t.price}));case"Price: high to low":return e.slice().sort((function(e,t){return t.price-e.price}));case"Top rated first":return e.slice().sort((function(e,t){return t.stars-e.stars}));default:return e}}(i,c),l=i.length>0,d=l?"":" page__main--index-empty";return Object(ce.jsxs)("div",{className:"page page--gray page--main",children:[Object(ce.jsx)(ne,{}),t?Object(ce.jsxs)("main",{className:"page__main page__main--index".concat(d),children:[Object(ce.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(ce.jsx)(ie,{}),l?Object(ce.jsx)(_e,{data:o}):Object(ce.jsx)(oe,{})]}):Object(ce.jsx)(ve,{})]})};var xe=function(){var e,t,a=Object(u.b)(),c=(e=0,t=b.length-1,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),i=b[c],o=Object(n.useRef)(null),l=Object(n.useRef)(null);return Object(ce.jsxs)("div",{className:"page page--gray page--login",children:[Object(ce.jsx)(ne,{}),Object(ce.jsx)("main",{className:"page__main page__main--login",children:Object(ce.jsxs)("div",{className:"page__login-container container",children:[Object(ce.jsxs)("section",{className:"login",children:[Object(ce.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(ce.jsxs)("form",{className:"login__form form",action:"#",method:"post",onSubmit:function(e){if(e.preventDefault(),null!==o.current&&null!==l.current){var t=function(e){var t=e.match(/[A-Za-z]/g),a=e.match(/[0-9]/g),r=!e.match(/[\s]/g),c=e.length>=2;return t&&a&&r&&c}(l.current.value),c=(d=o.current.value,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(d).toLowerCase()));if(t||j.b.info("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 \u043e\u0434\u043d\u043e\u0439 \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b"),c||j.b.info("\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 e-mail"),!c||!t)return;var n={login:o.current.value,password:l.current.value};a(function(e){var t=e.login,a=e.password;return function(){var e=Object(z.a)(E.a.mark((function e(c,n,i){var o,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.post(f.Login,{email:t,password:a});case 3:o=e.sent,l=o.data.token,c(K()),c(w(s.Auth)),c(R(r.Main)),U(l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j.b.info("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0441\u0435\u0442\u044c\u044e");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a,r){return e.apply(this,arguments)}}()}(n)),i=JSON.stringify(n),localStorage.setItem(D,i)}var i,d},children:[Object(ce.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(ce.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(ce.jsx)("input",{ref:o,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0})]}),Object(ce.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(ce.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(ce.jsx)("input",{ref:l,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0})]}),Object(ce.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(ce.jsx)("section",{className:"locations locations--login locations--current",children:Object(ce.jsx)("div",{className:"locations__item",children:Object(ce.jsx)(re.a,{className:"locations__item-link",to:r.Main,onClick:function(){a(_(i))},children:Object(ce.jsx)("span",{children:i})})})})]})})]})};var ge=function(e){var t=e.data,a=t.length>6?t.slice(0,6):t;return Object(ce.jsx)("div",{className:"property__gallery-container container",children:Object(ce.jsx)("div",{className:"property__gallery",children:a.map((function(e,t){var a=t;return Object(ce.jsx)("div",{className:"property__image-wrapper",children:Object(ce.jsx)("img",{className:"property__image",src:e,alt:"Photo studio"})},e+a)}))})})};var Ne=function(e){var t=e.onFavoriteClick,a=e.data,r=a.isFeature?" property__bookmark-button--active":"",c=a.detail.user.isPro?" property__avatar-wrapper--pro":"",s="".concat(20*Math.floor(a.stars),"%");return Object(ce.jsxs)(ce.Fragment,{children:[a.isPremium&&Object(ce.jsx)("div",{className:"property__mark",children:Object(ce.jsx)("span",{children:"Premium"})}),Object(ce.jsxs)("div",{className:"property__name-wrapper",children:[Object(ce.jsx)("h1",{className:"property__name",children:a.name}),Object(ce.jsxs)("button",{className:"property__bookmark-button button".concat(r),type:"button",onClick:t,children:[Object(ce.jsx)("svg",{className:"property__bookmark-icon",width:"31",height:"33",children:Object(ce.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(ce.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(ce.jsxs)("div",{className:"property__rating rating",children:[Object(ce.jsxs)("div",{className:"property__stars rating__stars",children:[Object(ce.jsx)("span",{style:{width:s}}),Object(ce.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(ce.jsx)("span",{className:"property__rating-value rating__value",children:a.stars})]}),Object(ce.jsxs)("ul",{className:"property__features",children:[Object(ce.jsx)("li",{className:"property__feature property__feature--entire",children:a.type}),Object(ce.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[a.detail.bedrooms," Bedrooms"]}),Object(ce.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",a.detail.maxAdults," adults"]})]}),Object(ce.jsxs)("div",{className:"property__price",children:[Object(ce.jsxs)("b",{className:"property__price-value",children:["\u20ac",a.price]}),Object(ce.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(ce.jsxs)("div",{className:"property__inside",children:[Object(ce.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(ce.jsx)("ul",{className:"property__inside-list",children:a.detail.includes.map((function(e){return Object(ce.jsx)("li",{className:"property__inside-item",children:e},e)}))})]}),Object(ce.jsxs)("div",{className:"property__host",children:[Object(ce.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(ce.jsxs)("div",{className:"property__host-user user",children:[Object(ce.jsx)("div",{className:"property__avatar-wrapper user__avatar-wrapper".concat(c),children:Object(ce.jsx)("img",{className:"property__avatar user__avatar",src:a.detail.user.img,width:"74",height:"74",alt:"Host avatar"})}),Object(ce.jsx)("span",{className:"property__user-name",children:a.detail.user.name}),a.detail.user.isPro&&Object(ce.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(ce.jsx)("div",{className:"property__description",children:Object(ce.jsx)("p",{className:"property__text",children:a.detail.description})})]})]})},ye=["perfect","good","not bad","badly","terribly"];var we=function(){var e=Object(u.b)(),t=Object(ae.i)(),a=Object(u.c)((function(e){return e})),r=a.reviewMessage,c=a.reviewRating,s=a.reviewFormIsBlocked,n=r.length<50,o=r.length>=300,l=n||o||0===c||s;return Object(ce.jsxs)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(a){a.preventDefault(),e(function(e,t){var a=t.comment,r=t.rating;return function(){var t=Object(z.a)(E.a.mark((function t(c,s,n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.post("".concat(f.ReviewList,"/").concat(e),{comment:a,rating:r});case 3:c($(e)),c(F(0)),c(S("")),c(M(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),j.b.info("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),c(M(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(t.id,{comment:r,rating:c})),e(M(!0))},children:[Object(ce.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(ce.jsx)("div",{className:"reviews__rating-form form__rating",children:ye.map((function(t,a,r){var n=r.length-a;return Object(ce.jsxs)(i.a.Fragment,{children:[Object(ce.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:n,id:"".concat(n,"-stars"),type:"radio",checked:n===c,disabled:s,required:!0,onChange:function(t){e(F(parseInt(t.target.value,10)))}}),Object(ce.jsx)("label",{htmlFor:"".concat(n,"-stars"),className:"reviews__rating-label form__rating-label",title:t,children:Object(ce.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(ce.jsx)("use",{xlinkHref:"#icon-star"})})})]},t)}))}),Object(ce.jsx)("textarea",{className:"reviews__textarea form__textarea",name:"review",value:r,id:"review",placeholder:"Tell how was your stay, what you like and what can be improved",disabled:s,onChange:function(t){e(S(t.target.value))}}),Object(ce.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(ce.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(ce.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least ",Object(ce.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(ce.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:l,children:"Submit"})]})]})};var ke=function(e){var t=e.authStatus,a=e.data,r=t===s.Auth,c=a.length>10?10:a.length;return Object(ce.jsxs)("section",{className:"property__reviews reviews",children:[Object(ce.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(ce.jsx)("span",{className:"reviews__amount",children:c})]}),Object(ce.jsx)("ul",{className:"reviews__list",children:Object(T.a)(a).sort((function(e,t){return t.date>e.date?1:(e.date,t.date,-1)})).slice(0,10).map((function(e){var t=new Date(e.date),a=h[t.getMonth()],r=t.getFullYear(),c="".concat(a," ").concat(r),s=t.toISOString().slice(0,10),n="".concat(20*Math.floor(e.stars),"%");return Object(ce.jsxs)("li",{className:"reviews__item",children:[Object(ce.jsxs)("div",{className:"reviews__user user",children:[Object(ce.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(ce.jsx)("img",{className:"reviews__avatar user__avatar",src:e.user.img,width:"54",height:"54",alt:"Reviews avatar"})}),Object(ce.jsx)("span",{className:"reviews__user-name",children:e.user.name})]}),Object(ce.jsxs)("div",{className:"reviews__info",children:[Object(ce.jsx)("div",{className:"reviews__rating rating",children:Object(ce.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(ce.jsx)("span",{style:{width:n}}),Object(ce.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(ce.jsx)("p",{className:"reviews__text",children:e.text}),Object(ce.jsx)("time",{className:"reviews__time",dateTime:s,children:c})]})]},e.id)}))}),r&&Object(ce.jsx)(we,{})]})};var Le=function(e){var t=e.data;return Object(ce.jsx)("div",{className:"container",children:Object(ce.jsxs)("section",{className:"near-places places",children:[Object(ce.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(ce.jsx)("div",{className:"near-places__list places__list",children:t.map((function(e){return Object(ce.jsx)("div",{className:"near-places__card",children:Object(ce.jsx)(be,{data:e})},e.id)}))})]})})};var Re=function(){var e=Object(ae.i)(),t=Object(u.c)((function(e){return e})),a=t.offerItem,s=t.nearList,i=t.reviewList,o=t.authStatus,l=Object(u.b)(),d=null!==a&&a.isFeature;Object(n.useEffect)((function(){var t;l((t=e.id,function(){var e=Object(z.a)(E.a.mark((function e(a,c,s){var n,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("".concat(f.OfferList,"/").concat(t));case 3:n=e.sent,i=n.data,a(x(J(i))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(R(r.Error404));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,r){return e.apply(this,arguments)}}())),l(function(e){return function(){var t=Object(z.a)(E.a.mark((function t(a,r,c){var s,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.get("".concat(f.OfferList,"/").concat(e,"/nearby"));case 3:s=t.sent,n=s.data,a(g(W(n))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),j.b.info(Y);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(e.id)),l($(e.id)),l(S("")),l(F(0))}),[e.id,l]);var p=null!==a,m=s!==[],b=s,h=null;return p&&(b=[].concat(Object(T.a)(s),[a]),h=a.id),Object(ce.jsxs)("div",{className:"page",children:[Object(ce.jsx)(ne,{}),Object(ce.jsxs)("main",{className:"page__main page__main--property",children:[p&&Object(ce.jsxs)("section",{className:"property",children:[Object(ce.jsx)(ge,{data:a.gallery}),Object(ce.jsx)("div",{className:"property__container container",children:Object(ce.jsxs)("div",{className:"property__wrapper",children:[Object(ce.jsx)(Ne,{onFavoriteClick:function(){l(G(e.id,d,c.Offer))},data:a}),Object(ce.jsx)(ke,{authStatus:o,data:i})]})}),Object(ce.jsx)("section",{className:"property__map",children:Object(ce.jsx)(me,{city:a.city,data:b,activeId:h})})]}),m&&Object(ce.jsx)(Le,{data:s})]})]})};var Se=function(e){var t=e.data,a=t.id,s=Object(u.b)(),n=t.isFeature?" place-card__bookmark-button--active":"",i="".concat(20*Math.floor(t.stars),"%");return Object(ce.jsxs)("article",{className:"favorites__card place-card",children:[Object(ce.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(ce.jsx)(re.a,{to:Object(ae.f)(r.Offer,{id:a}),children:Object(ce.jsx)("img",{className:"place-card__image",src:t.img,width:"150",height:"110",alt:"Place image"})})}),Object(ce.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(ce.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(ce.jsxs)("div",{className:"place-card__price",children:[Object(ce.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",t.price]}),Object(ce.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(ce.jsxs)("button",{className:"place-card__bookmark-button button".concat(n),type:"button",onClick:function(){s(G(a,t.isFeature,c.Favorites))},children:[Object(ce.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",children:Object(ce.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(ce.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(ce.jsx)("div",{className:"place-card__rating rating",children:Object(ce.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(ce.jsx)("span",{style:{width:i}}),Object(ce.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(ce.jsx)("h2",{className:"place-card__name",children:Object(ce.jsx)(re.a,{to:Object(ae.f)(r.Offer,{id:a}),children:t.name})}),Object(ce.jsx)("p",{className:"place-card__type",children:t.type})]})]})};var Fe=function(e){var t=e.data;return Object(ce.jsxs)("li",{className:"favorites__locations-items",children:[Object(ce.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(ce.jsx)("div",{className:"locations__item",children:Object(ce.jsx)(re.a,{className:"locations__item-link",to:r.Main,children:Object(ce.jsx)("span",{children:t.name})})})}),Object(ce.jsx)("div",{className:"favorites__places",children:t.places.map((function(e){return Object(ce.jsx)(Se,{data:e},e.id)}))})]})};var Me=function(){return Object(ce.jsxs)("section",{className:"favorites favorites--empty",children:[Object(ce.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(ce.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(ce.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(ce.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})};var Ae=function(){return Object(ce.jsx)("footer",{className:"footer container",children:Object(ce.jsx)(re.a,{className:"footer__logo-link",to:r.Main,children:Object(ce.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})};var Ie=function(){var e=Object(u.b)();Object(n.useEffect)((function(){e(function(){var e=Object(z.a)(E.a.mark((function e(t,a,r){var c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get(f.FavoriteList);case 3:c=e.sent,s=c.data,t(y(W(s))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.info(Y);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,r){return e.apply(this,arguments)}}())}),[]);var t=Object(u.c)((function(e){return e})).favoriteList,a=new Set("");t.forEach((function(e){a.add(e.city.name)}));var r=Object(T.a)(a).map((function(e,a){return{id:"".concat(a),name:e,places:t.filter((function(t){return t.city.name===e}))}})),c=r.length>0;return Object(ce.jsxs)("div",{className:"page",children:[Object(ce.jsx)(ne,{}),Object(ce.jsx)("main",{className:"page__main page__main--favorites",children:Object(ce.jsx)("div",{className:"page__favorites-container container",children:Object(ce.jsxs)("section",{className:"favorites",children:[Object(ce.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(ce.jsx)("ul",{className:"favorites__list",children:c?r.map((function(e){return Object(ce.jsx)(Fe,{data:e},e.id)})):Object(ce.jsx)(Me,{})})]})})}),Object(ce.jsx)(Ae,{})]})};var Ce=function(e){var t=e.exact,a=e.path,r=e.render,c=e.redirect,s=e.status,n=Object(u.c)((function(e){return e})).authStatus;return Object(ce.jsx)(ae.b,{exact:t,path:a,render:function(e){return n===s?r(e):Object(ce.jsx)(ae.a,{to:c})}})};var Te=function(){return Object(ce.jsx)("div",{className:"page page--gray",children:Object(ce.jsxs)("main",{className:"page__main",children:[Object(ce.jsx)(ne,{}),Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsx)("h1",{children:"404. Page not found"}),Object(ce.jsx)(re.a,{to:"/",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})]})})};var Pe=function(){return Object(ce.jsx)(ae.c,{history:V,children:Object(ce.jsxs)(ae.d,{children:[Object(ce.jsx)(ae.b,{exact:!0,path:r.Main,children:Object(ce.jsx)(Oe,{})}),Object(ce.jsx)(ae.b,{exact:!0,path:r.Offer,children:Object(ce.jsx)(Re,{})}),Object(ce.jsx)(Ce,{exact:!0,path:r.Favorites,status:s.Auth,redirect:r.Login,render:function(){return Object(ce.jsx)(Ie,{})}}),Object(ce.jsx)(Ce,{exact:!0,path:r.Login,status:s.NoAuth,redirect:r.Main,render:function(){return Object(ce.jsx)(xe,{})}}),Object(ce.jsx)(ae.b,{children:Object(ce.jsx)(Te,{})})]})})},Ee=function(e){var t=te.a.create({baseURL:"https://8.react.pages.academy/six-cities",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===Z.Unauthorized&&e(),Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(q);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return ze.dispatch(w(s.NoAuth))})),ze=Object(d.a)({reducer:I,middleware:function(e){return e({thunk:{extraArgument:Ee}}).concat(X)}});ze.dispatch(K()),l.a.render(Object(ce.jsx)(i.a.StrictMode,{children:Object(ce.jsxs)(u.a,{store:ze,children:[Object(ce.jsx)(j.a,{}),Object(ce.jsx)(Pe,{})]})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.bdf1053e.chunk.js.map